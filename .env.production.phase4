# ===================================================================
# PORTFOLIO KPI COPILOT - PHASE 4 DEPLOYMENT CONFIGURATION
# Supabase Database Migration + Real-time Features
# ===================================================================

# ===================================================================
# DEPLOYMENT PHASE CONTROL
# ===================================================================
DEPLOYMENT_PHASE=4
NODE_ENV=production

# ===================================================================
# CORE APPLICATION SETTINGS
# ===================================================================
NEXTAUTH_URL=https://portfolio-kpi-copilot.vercel.app
NEXTAUTH_SECRET=your-nextauth-secret-key-here

# ===================================================================
# DATABASE CONFIGURATION (Phase 4 - SUPABASE PRIMARY)
# ===================================================================

# Supabase Configuration (PRIMARY DATABASE)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Database Migration Settings (NEW - ENABLED)
USE_SUPABASE_PRIMARY=true
FALLBACK_TO_SQLITE=true
ENABLE_REALTIME_SUBSCRIPTIONS=true
ENABLE_VECTOR_SEARCH=true

# SQLite Fallback (DISABLED - Using Vercel DATABASE_URL)
# DATABASE_URL="file:./dev.db"

# Database Performance
DB_POOL_SIZE=10
DB_TIMEOUT=30000
DB_QUERY_CACHE_TTL=300

# ===================================================================
# AI SERVICES CONFIGURATION (Phase 4 - Same as Phase 3)
# ===================================================================

# OpenRouter API (Primary AI Provider)
OPENROUTER_API_KEY=your-openrouter-api-key
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_DEFAULT_MODEL=anthropic/claude-3.5-sonnet
OPENROUTER_FALLBACK_MODEL=openai/gpt-4o

# OpenAI API (Backup AI Provider)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4o
OPENAI_MAX_TOKENS=4000

# ===================================================================
# FEATURE FLAGS (Phase 4)
# ===================================================================

# Core Features (Always Enabled)
ENABLE_PORTFOLIO_MANAGEMENT=true
ENABLE_KPI_TRACKING=true
ENABLE_BASIC_AUTH=true
ENABLE_DASHBOARD=true

# Phase 1 AI Features (Enabled)
ENABLE_AI_INSIGHTS=true
ENABLE_BASIC_AI_EXPLANATIONS=true
ENABLE_OPENROUTER_INTEGRATION=true

# Phase 2 AI Features (Enabled)
ENABLE_NATURAL_LANGUAGE_QUERIES=true
ENABLE_ADVANCED_AI_ORCHESTRATOR=true
ENABLE_STREAMING_RESPONSES=true
ENABLE_AI_ANALYTICS=true

# Phase 3 Financial Data Features (Enabled)
ENABLE_FINANCIAL_DATA_API=true
ENABLE_MARKET_DATA_INTEGRATION=true
ENABLE_ECONOMIC_INDICATORS=true
ENABLE_INDUSTRY_BENCHMARKS=true

# Phase 4 Database Features (NEW - ENABLED)
ENABLE_SUPABASE_MIGRATION=true
ENABLE_REALTIME_UPDATES=true
ENABLE_VECTOR_SEARCH=true
ENABLE_ADVANCED_QUERIES=true

# Phase 5+ Features (Still Disabled)
ENABLE_RBAC=false
ENABLE_AUDIT_LOGGING=false
ENABLE_ADVANCED_SECURITY=false
ENABLE_PERFORMANCE_MONITORING=false

# Phase 6+ Features (Still Disabled)
ENABLE_DOCUMENT_UPLOAD=false
ENABLE_PREDICTIVE_ANALYTICS=false
ENABLE_CUSTOM_DASHBOARDS=false
ENABLE_WEBHOOKS=false

# ===================================================================
# SUPABASE REAL-TIME CONFIGURATION (Phase 4)
# ===================================================================

# Real-time Subscriptions
ENABLE_REALTIME_SUBSCRIPTIONS=true
REALTIME_HEARTBEAT_INTERVAL=30000
REALTIME_RECONNECT_ATTEMPTS=5

# Real-time Features
ENABLE_LIVE_KPI_UPDATES=true
ENABLE_COLLABORATIVE_EDITING=true
ENABLE_REAL_TIME_NOTIFICATIONS=true
ENABLE_LIVE_DASHBOARD_UPDATES=true

# Subscription Configuration
PORTFOLIO_SUBSCRIPTION_ENABLED=true
KPI_SUBSCRIPTION_ENABLED=true
DOCUMENT_SUBSCRIPTION_ENABLED=true
USER_ACTIVITY_SUBSCRIPTION_ENABLED=true

# ===================================================================
# VECTOR SEARCH & RAG (Phase 4)
# ===================================================================

# Vector Database Configuration
ENABLE_VECTOR_SEARCH=true
EMBEDDING_MODEL=text-embedding-ada-002
EMBEDDING_DIMENSIONS=1536
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# RAG Configuration
ENABLE_RAG_INTEGRATION=true
RAG_SIMILARITY_THRESHOLD=0.7
RAG_MAX_RESULTS=10
RAG_CONTEXT_WINDOW=4000

# Document Processing
ENABLE_DOCUMENT_EMBEDDING=true
ENABLE_AUTOMATIC_INDEXING=true
ENABLE_SEMANTIC_SEARCH=true

# ===================================================================
# FINANCIAL DATA PROVIDERS (Phase 4 - Same as Phase 3)
# ===================================================================

# Alpha Vantage (Economic Data, News, Basic Market Data)
ALPHA_VANTAGE_API_KEY=your-alpha-vantage-api-key

# IEX Cloud (Real-time Market Data)
IEX_CLOUD_API_KEY=your-iex-cloud-api-key

# Polygon.io (Market Data, Options, Forex)
POLYGON_API_KEY=your-polygon-api-key

# Financial Modeling Prep (Financial Statements, Ratios)
FMP_API_KEY=your-fmp-api-key

# Yahoo Finance (Backup/Free Data)
ENABLE_YAHOO_FINANCE=true

# ===================================================================
# ENHANCED CACHING & PERFORMANCE (Phase 4)
# ===================================================================

# Redis (Still disabled for Phase 4)
ENABLE_REDIS_CACHE=false
CACHE_DEFAULT_TTL=300

# Supabase Caching
ENABLE_SUPABASE_CACHING=true
SUPABASE_CACHE_TTL=300
ENABLE_QUERY_OPTIMIZATION=true

# Real-time Performance
REALTIME_BUFFER_SIZE=1000
REALTIME_BATCH_INTERVAL=100
ENABLE_REALTIME_COMPRESSION=true

# Vector Search Performance
VECTOR_SEARCH_CACHE_TTL=3600
ENABLE_VECTOR_SEARCH_OPTIMIZATION=true

# ===================================================================
# ENHANCED SECURITY & RATE LIMITING (Phase 4)
# ===================================================================

# Row Level Security (RLS)
ENABLE_ROW_LEVEL_SECURITY=true
ENABLE_MULTI_TENANT_ISOLATION=true
ENABLE_ORGANIZATION_ISOLATION=true

# Security Headers (Enhanced)
ENABLE_SECURITY_HEADERS=true
ENABLE_CORS=true
CORS_ORIGIN=https://portfolio-kpi-copilot.vercel.app

# Enhanced Rate Limiting
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX_REQUESTS=100

# Database Rate Limiting
DATABASE_RATE_LIMIT_WINDOW=60000
DATABASE_RATE_LIMIT_MAX_REQUESTS=200
REALTIME_RATE_LIMIT_MAX_REQUESTS=500

# ===================================================================
# MIGRATION CONFIGURATION (Phase 4)
# ===================================================================

# Migration Settings
MIGRATION_BATCH_SIZE=100
MIGRATION_TIMEOUT=300000
ENABLE_MIGRATION_VALIDATION=true
ENABLE_MIGRATION_ROLLBACK=true

# Data Integrity
ENABLE_DATA_VALIDATION=true
ENABLE_FOREIGN_KEY_CHECKS=true
ENABLE_CONSTRAINT_VALIDATION=true

# Migration Monitoring
ENABLE_MIGRATION_LOGGING=true
ENABLE_MIGRATION_PROGRESS_TRACKING=true
ENABLE_MIGRATION_ERROR_REPORTING=true

# ===================================================================
# OAUTH PROVIDERS (Same as Previous Phases)
# ===================================================================

# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# ===================================================================
# ENHANCED MONITORING & LOGGING (Phase 4)
# ===================================================================

# Application Monitoring (Enhanced)
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_INTERVAL=30000
ENABLE_METRICS_COLLECTION=true

# Database Monitoring
ENABLE_DATABASE_MONITORING=true
ENABLE_QUERY_PERFORMANCE_TRACKING=true
ENABLE_CONNECTION_POOL_MONITORING=true

# Real-time Monitoring
ENABLE_REALTIME_MONITORING=true
ENABLE_SUBSCRIPTION_TRACKING=true
ENABLE_REALTIME_ERROR_TRACKING=true

# Vector Search Monitoring
ENABLE_VECTOR_SEARCH_MONITORING=true
ENABLE_EMBEDDING_PERFORMANCE_TRACKING=true

# ===================================================================
# DEVELOPMENT & DEBUGGING (Disabled for Production)
# ===================================================================

# Development Settings
ENABLE_DEBUG_MODE=false
ENABLE_VERBOSE_LOGGING=false
ENABLE_API_DOCUMENTATION=true
ENABLE_DEVELOPMENT_TOOLS=false

# Testing Configuration
ENABLE_TEST_DATA=false
BYPASS_AUTHENTICATION=false

# ===================================================================
# DEPLOYMENT CONFIGURATION
# ===================================================================

# Vercel Deployment
VERCEL_ENV=production

# Performance
ENABLE_STATIC_OPTIMIZATION=true

# ===================================================================
# COMPLIANCE & PRIVACY (Enhanced)
# ===================================================================

# Data Privacy
ENABLE_GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=365

# Database Privacy
ENABLE_DATA_ENCRYPTION=true
ENABLE_AUDIT_LOGGING=true
ENABLE_ACCESS_LOGGING=true

# Real-time Privacy
ENABLE_REALTIME_DATA_FILTERING=true
ENABLE_SUBSCRIPTION_AUTHORIZATION=true

# ===================================================================
# NOTIFICATIONS & ALERTS (Enhanced)
# ===================================================================

# Email Configuration (Still disabled)
ENABLE_EMAIL_NOTIFICATIONS=false

# Database Alerts
ENABLE_DATABASE_ERROR_ALERTS=true
ENABLE_MIGRATION_ALERTS=true
ENABLE_PERFORMANCE_ALERTS=true

# Real-time Alerts
ENABLE_REALTIME_ERROR_ALERTS=true
ENABLE_SUBSCRIPTION_ALERTS=true

# ===================================================================
# INTEGRATION SETTINGS (Still disabled)
# ===================================================================

# Webhook Configuration (Still disabled)
ENABLE_WEBHOOKS=false
ENABLE_THIRD_PARTY_INTEGRATIONS=false

# ===================================================================
# PHASE 4 DEPLOYMENT NOTES
# ===================================================================

# This configuration enables:
# ✅ All Phase 1-3 features (AI, NLP, financial data)
# ✅ Supabase PostgreSQL as primary database
# ✅ Real-time subscriptions and live updates
# ✅ Vector search and RAG integration
# ✅ Row Level Security (RLS) for multi-tenant isolation
# ✅ Advanced database queries and optimization
# ✅ Migration tools with validation and rollback
# ✅ Enhanced monitoring and performance tracking
# ✅ Collaborative editing and real-time notifications

# Still disabled for Phase 4:
# ❌ Advanced security and RBAC (Phase 5)
# ❌ Document upload and processing (Phase 6)

# Required for Phase 4:
# 🔑 Supabase project with PostgreSQL database
# 🔑 Supabase service role key for migrations
# 🔑 Vector extension enabled in Supabase
# 🔑 Real-time subscriptions enabled
# 🔑 All Phase 3 financial API keys

# Migration Process:
# 1. Set up Supabase project and configure environment
# 2. Run migration dry-run to validate data
# 3. Execute migration with validation
# 4. Enable real-time subscriptions
# 5. Test vector search functionality
# 6. Verify multi-tenant isolation

# Next Phase Preparation:
# - Implement RBAC and advanced security
# - Set up comprehensive audit logging
# - Prepare for enterprise features
# - Plan document upload and processing

# ===================================================================
# END OF PHASE 4 CONFIGURATION
# ===================================================================
